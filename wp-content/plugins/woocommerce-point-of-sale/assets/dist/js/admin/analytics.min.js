"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,o){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,o):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,o):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,r=new Array(o);t<o;t++)r[t]=e[t];return r}function ownKeys(o,e){var t,r=Object.keys(o);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(o),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,t)),r}function _objectSpread(o){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){_defineProperty(o,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(t,e))})}return o}function _defineProperty(e,o,t){return(o=_toPropertyKey(o))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,o){if("object"!==_typeof(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===o?String:Number)(e);t=t.call(e,o||"default");if("object"!==_typeof(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}var addFilter=wp.hooks.addFilter,_wp$i18n=wp.i18n,__=_wp$i18n.__,_x=_wp$i18n._x,addOrdersReportFilters=function(e){var o=e.findIndex(function(e){return"filter"===e.param}),t=e[o].filters,r=[];return t.forEach(function(e){r.push(e),"all"===e.value&&(r.push({label:__("POS Orders","woocommerce-point-of-sale"),value:"pos"}),r.push({label:__("Online Orders","woocommerce-point-of-sale"),value:"online"}))}),e[o]=_objectSpread(_objectSpread({},e[o]),{},{filters:r}),e},addOrdersReportAdvancedFilters=(addFilter("woocommerce_admin_orders_report_filters","woocommerce-point-of-sale",addOrdersReportFilters),function(e){return e.filters.pos_register={labels:{add:__("Register","woocommerce-point-of-sale"),remove:__("Remove register filter","woocommerce-point-of-sale"),rule:__("Select a register filter match","woocommerce-point-of-sale"),title:__("{{title}}Register{{/title}} {{rule /}} {{filter /}}","woocommerce-point-of-sale"),filter:__("Select a register","woocommerce-point-of-sale")},rules:[{value:"is",label:_x("Is","register","woocommerce-point-of-sale")},{value:"is_not",label:_x("Is Not","register","woocommerce-point-of-sale")}],input:{component:"SelectControl",options:wc_pos_admin_analytics_params.registers.map(function(e){return{value:e.id,label:e.label}})}},e.filters.pos_outlet={labels:{add:__("Outlet","woocommerce-point-of-sale"),remove:__("Remove outlet filter","woocommerce-point-of-sale"),rule:__("Select an outlet filter match","woocommerce-point-of-sale"),title:__("{{title}}Outlet{{/title}} {{rule /}} {{filter /}}","woocommerce-point-of-sale"),filter:__("Select an outlet","woocommerce-point-of-sale")},rules:[{value:"is",label:_x("Is","outlet","woocommerce-point-of-sale")},{value:"is_not",label:_x("Is Not","outlet","woocommerce-point-of-sale")}],input:{component:"SelectControl",options:wc_pos_admin_analytics_params.outlets.map(function(e){return{value:e.id,label:e.label}})}},e}),addOrderTypeColumn=(addFilter("woocommerce_admin_orders_report_advanced_filters","woocommerce-point-of-sale",addOrdersReportAdvancedFilters),function(t){var e,o;return"orders"===t.endpoint&&(e=[{label:__("Type"),key:"type"}].concat(_toConsumableArray(t.headers)),o=t.rows.map(function(e,o){o=t.items.data[o];return[{display:{admin:__("Manual","woocommerce-point-of-sale"),"rest-api":__("API","woocommerce-point-of-sale"),subscription:__("Subscription","woocommerce-point-of-sale"),pos:__("POS","woocommerce-point-of-sale")}[o.created_via]||__("Website","woocommerce-point-of-sale"),value:o.created_via}].concat(_toConsumableArray(e))}),t.headers=e,t.rows=o),t}),addOutletStockColumns=(addFilter("woocommerce_admin_report_table","woocommerce-point-of-sale",addOrderTypeColumn),function(a){var i,o,l,t,e;return"products"===a.endpoint&&wc_pos_admin_analytics_params.data.manage_outlet_stock&&(i=wc_pos_admin_analytics_params.outlets.filter(function(e){return e.id!==wc_pos_admin_analytics_params.data.default_outlet_id}),l=o=0,t=[],a.headers.forEach(function(e){t.push(e),"stock"===e.key&&(l=o,t.push.apply(t,_toConsumableArray(i.map(function(e){return{label:"".concat(__("Stock for","woocommerce-point-of-sale")," ").concat(e.label),key:"outlet_stock_".concat(e.id)}})))),o++}),e=a.rows.map(function(e,o){var t=a.items.data[o],r=[],n=0;return e.forEach(function(e){r.push(e),n===l&&r.push.apply(r,_toConsumableArray(i.map(function(e){return{display:t.extended_info.outlet_stock[e.id]||__("N/A","woocommerce-point-of-sale"),value:t.extended_info.outlet_stock[e.id]||0}}))),n++}),r}),a.headers=t,a.rows=e),a});addFilter("woocommerce_admin_report_table","woocommerce-point-of-sale",addOutletStockColumns);