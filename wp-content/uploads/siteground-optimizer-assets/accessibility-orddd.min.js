jQuery(function(a){a('#'+orddd_lite_access.orddd_lite_field_name).datepicker({onClose:removeAria}),a('#'+orddd_lite_access.orddd_lite_field_name).attr('aria-describedby','Delivery Date'),dayTripper()});function dayTripper(){jQuery('#'+orddd_lite_access.orddd_lite_field_name).focus(function(){setTimeout(function(){var a=jQuery('.ui-datepicker-today a')[0];(!a||void 0!==jQuery('.ui-state-active')[0])&&(a=jQuery('.ui-state-active')[0]||jQuery('a.ui-state-default')[0]),jQuery("#e_deliverydate_field").attr('aria-hidden','true'),jQuery("#skipnav").attr('aria-hidden','true'),jQuery(".ui-datepicker-current").hide(),a.focus(),datePickHandler(),jQuery(document).on('click','#ui-datepicker-div .ui-datepicker-close',function(){closeCalendar()})},0)})}function datePickHandler(){var a=document.getElementById('ui-datepicker-div'),e=document.getElementById('e_deliverydate'),b,c,d;if(!a||!e)return;a.setAttribute('role','application'),a.setAttribute('aria-label','Delivery date Datepicker'),c=jQuery('.ui-datepicker-prev',a)[0],d=jQuery('.ui-datepicker-next',a)[0],d.href='javascript:void(0)',c.href='javascript:void(0)',d.setAttribute('role','button'),d.removeAttribute('title'),c.setAttribute('role','button'),c.removeAttribute('title'),appendOffscreenMonthText(d),appendOffscreenMonthText(c),jQuery(d).on('click',handleNextClicks),jQuery(c).on('click',handlePrevClicks),monthDayYearText(),jQuery(a).on('keydown',function(g){var f=g.which,e=g.target,h=getCurrentDate(a),i,k,j;if(h||(h=jQuery('a.ui-state-default')[0],setHighlightState(h,a)),27===f)return g.stopPropagation(),closeCalendar();f===9&&g.shiftKey?(g.preventDefault(),jQuery(e).hasClass('ui-datepicker-close')?jQuery('.ui-datepicker-prev')[0].focus():jQuery(e).hasClass('ui-state-default')?jQuery('.ui-datepicker-close')[0].focus():jQuery(e).hasClass('ui-datepicker-prev')?jQuery('.ui-datepicker-next')[0].focus():jQuery(e).hasClass('ui-datepicker-next')&&(b=jQuery('.ui-state-highlight')||jQuery('.ui-state-active')[0],b&&b.focus())):f===9?(g.preventDefault(),jQuery(e).hasClass('ui-datepicker-close')?(b=jQuery('.ui-state-highlight')||jQuery('.ui-state-active')[0],b&&b.focus()):jQuery(e).hasClass('ui-state-default')?jQuery('.ui-datepicker-next')[0].focus():jQuery(e).hasClass('ui-datepicker-next')?jQuery('.ui-datepicker-prev')[0].focus():jQuery(e).hasClass('ui-datepicker-prev')&&jQuery('.ui-datepicker-close')[0].focus()):f===37?!jQuery(e).hasClass('ui-datepicker-close')&&jQuery(e).hasClass('ui-state-default')&&(g.preventDefault(),previousDay(e)):f===39?!jQuery(e).hasClass('ui-datepicker-close')&&jQuery(e).hasClass('ui-state-default')&&(g.preventDefault(),nextDay(e)):f===38?!jQuery(e).hasClass('ui-datepicker-close')&&jQuery(e).hasClass('ui-state-default')&&(g.preventDefault(),upHandler(e,a,c)):f===40?!jQuery(e).hasClass('ui-datepicker-close')&&jQuery(e).hasClass('ui-state-default')&&(g.preventDefault(),downHandler(e,a,d)):f===13?jQuery(e).hasClass('ui-state-default')?setTimeout(function(){closeCalendar()},100):jQuery(e).hasClass('ui-datepicker-prev')?handlePrevClicks():jQuery(e).hasClass('ui-datepicker-next')&&handleNextClicks():32===f?(jQuery(e).hasClass('ui-datepicker-prev')||jQuery(e).hasClass('ui-datepicker-next'))&&e.click():33===f?moveOneMonth(e,'prev'):34===f?moveOneMonth(e,'next'):36===f?(i=jQuery(e).closest('tbody').find('.ui-state-default')[0],i&&(i.focus(),setHighlightState(i,jQuery('#ui-datepicker-div')[0]))):35===f&&(k=jQuery(e).closest('tbody').find('.ui-state-default'),j=k[k.length-1],j&&(j.focus(),setHighlightState(j,jQuery('#ui-datepicker-div')[0]))),jQuery(".ui-datepicker-current").hide()})}function closeCalendar(){var a=jQuery('#ui-datepicker-div'),b;jQuery(a).off('keydown'),b=jQuery('#'+orddd_lite_access.orddd_lite_field_name)[0],jQuery(b).datepicker('hide')}function removeAria(){jQuery("#e_deliverydate_field").removeAttr('aria-hidden'),jQuery("#skipnav").removeAttr('aria-hidden')}function isOdd(a){return a%2}function moveOneMonth(d,e){var b=e==='next'?jQuery('.ui-datepicker-next')[0]:jQuery('.ui-datepicker-prev')[0],c,f,a;if(!b)return;c='#ui-datepicker-div tbody td:not(.ui-state-disabled)',f=jQuery(c),a=jQuery.inArray(d.parentNode,f),b.click(),setTimeout(function(){var e,b,d;for(updateHeaderElements(),e=jQuery(c),b=e[a],d=b&&jQuery(b).find('a')[0];!d;)a--,b=e[a],d=b&&jQuery(b).find('a')[0];setHighlightState(d,jQuery('#ui-datepicker-div')[0]),d.focus()},0)}function handleNextClicks(){setTimeout(function(){updateHeaderElements(),prepHighlightState(),jQuery('.ui-datepicker-next').focus(),jQuery(".ui-datepicker-current").hide()},0)}function handlePrevClicks(){setTimeout(function(){updateHeaderElements(),prepHighlightState(),jQuery('.ui-datepicker-prev').focus(),jQuery(".ui-datepicker-current").hide()},0)}function previousDay(a){var e=document.getElementById('ui-datepicker-div'),c,d,b;if(!a)return;if(c=jQuery(a).closest('td'),!c)return;d=jQuery(c).prev(),b=jQuery('a.ui-state-default',d)[0],d&&b?(setHighlightState(b,e),b.focus()):handlePrevious(a)}function handlePrevious(c){var f=document.getElementById('ui-datepicker-div'),d,a,e,b;if(!c)return;if(d=jQuery(c).closest('tr'),!d)return;a=jQuery(d).prev(),!a||a.length===0?previousMonth():(e=jQuery('td a.ui-state-default',a),b=e[e.length-1],b&&setTimeout(function(){setHighlightState(b,f),b.focus()},0))}function previousMonth(){var b=jQuery('.ui-datepicker-prev')[0],a=document.getElementById('ui-datepicker-div');b.click(),setTimeout(function(){var b=jQuery('tr',a),c=jQuery('td a.ui-state-default',b[b.length-1]),d=c[c.length-1];updateHeaderElements(),setHighlightState(d,a),d.focus()},0)}function nextDay(a){var e=document.getElementById('ui-datepicker-div'),c,d,b;if(!a)return;if(c=jQuery(a).closest('td'),!c)return;d=jQuery(c).next(),b=jQuery('a.ui-state-default',d)[0],d&&b?(setHighlightState(b,e),b.focus()):handleNext(a)}function handleNext(c){var d=document.getElementById('ui-datepicker-div'),e,a,b;if(!c)return;e=jQuery(c).closest('tr'),a=jQuery(e).next(),!a||a.length===0?nextMonth():(b=jQuery('a.ui-state-default',a)[0],b&&(setHighlightState(b,d),b.focus()))}function nextMonth(){nextMon=jQuery('.ui-datepicker-next')[0];var a=document.getElementById('ui-datepicker-div');nextMon.click(),setTimeout(function(){updateHeaderElements();var b=jQuery('a.ui-state-default',a)[0];setHighlightState(b,a),b.focus()},0)}function upHandler(d,b,g){var a,k,h,i,e,j,f,c;if(g=jQuery('.ui-datepicker-prev')[0],a=jQuery(d).closest('tr'),!a)return;k=jQuery('td',a),h=jQuery('a.ui-state-default',a),i=jQuery.inArray(d,h),e=jQuery(a).prev(),j=jQuery('td',e),f=j[i],c=jQuery('a.ui-state-default',f)[0],e&&f&&c?(setHighlightState(c,b),c.focus()):(g.click(),setTimeout(function(){var a,f,i,h,g,e,j,l,m,c;updateHeaderElements(),a=jQuery('tr',b),f=a[a.length-1],i=jQuery('td',f),h=jQuery.inArray(d.parentNode,k),g=i[h],e=jQuery('a.ui-state-default',g)[0],f&&g&&e?(setHighlightState(e,b),e.focus()):(j=a[a.length-2],l=jQuery('td',j),m=l[h],c=jQuery('a.ui-state-default',m)[0],c&&(setHighlightState(c,b),c.focus()))},0))}function downHandler(h,a,j){var b,g,c,e,i,f,d;if(j=jQuery('.ui-datepicker-next')[0],b=jQuery(h).closest('tr'),!b)return;g=jQuery('td',b),c=jQuery.inArray(h.parentNode,g),e=jQuery(b).next(),i=jQuery('td',e),f=i[c],d=jQuery('a.ui-state-default',f)[0],e&&f&&d?(setHighlightState(d,a),d.focus()):(j.click(),setTimeout(function(){var e,j,f,d,g,h,i,b;updateHeaderElements(),e=jQuery('tbody tr',a),j=jQuery('td',e[0]),f=j[c],d=jQuery('a.ui-state-default',f)[0],f&&d?(setHighlightState(d,a),d.focus()):(g=e[1],h=jQuery('td',g),i=h[c],b=jQuery('a.ui-state-default',i)[0],g&&b&&(setHighlightState(b,a),b.focus()))},0))}function onCalendarHide(){closeCalendar()}function monthDayYearText(){var c=jQuery('.amaze-date'),a,b;if(jQuery(c).each(function(a){a.parentNode.removeChild(a)}),a=document.getElementById('ui-datepicker-div'),!a)return;b=jQuery('a.ui-state-default',a),jQuery(b).attr('role','button').on('keydown',function(a){a.which===32&&(a.preventDefault(),a.target.click(),setTimeout(function(){closeCalendar()},100))}),jQuery(b).each(function(m,b){var i=jQuery(b).closest('tr'),j=jQuery('td',i),g=jQuery.inArray(b.parentNode,j),h=jQuery('thead tr th',a),f=h[g],e=jQuery('span',f)[0],c=jQuery('.ui-datepicker-month',a)[0].innerHTML,d=jQuery('.ui-datepicker-year',a)[0].innerHTML,k=b.innerHTML,l;if(!e||!c||!k||!d)return;l=b.innerHTML+' '+c+' '+d+' '+e.title,b.setAttribute('aria-label',l)})}function updateHeaderElements(){var a=document.getElementById('ui-datepicker-div');if(!a)return;prev=jQuery('.ui-datepicker-prev',a)[0],next=jQuery('.ui-datepicker-next',a)[0],next.href='javascript:void(0)',prev.href='javascript:void(0)',next.setAttribute('role','button'),prev.setAttribute('role','button'),appendOffscreenMonthText(next),appendOffscreenMonthText(prev),jQuery(next).on('click',handleNextClicks),jQuery(prev).on('click',handlePrevClicks),monthDayYearText()}function prepHighlightState(){var a=document.getElementById('ui-datepicker-div'),b=jQuery('.ui-state-highlight',a)[0]||jQuery('.ui-state-default',a)[0];b&&a&&setHighlightState(b,a)}function setHighlightState(a,b){var c=getCurrentDate(b);jQuery(c).removeClass('ui-state-highlight'),jQuery(a).addClass('ui-state-highlight')}function getCurrentDate(a){var b=jQuery('.ui-state-highlight',a)[0];return b}function appendOffscreenMonthText(g){var d=jQuery(g).hasClass('ui-datepicker-next'),b=jQuery.datepicker._defaults.monthNames,i=orddd_lite_access.orddd_lite_number_of_months,c=jQuery('.ui-datepicker-title .ui-datepicker-month').text(),f=jQuery.inArray(c,b),a=jQuery('.ui-datepicker-title .ui-datepicker-year').text(),h,e;'2'==i&&(d?(c=jQuery('.ui-datepicker-group-last .ui-datepicker-title .ui-datepicker-month').text(),a=jQuery('.ui-datepicker-group-last .ui-datepicker-title .ui-datepicker-year').text()):(c=jQuery('.ui-datepicker-group-first .ui-datepicker-title .ui-datepicker-month').text(),a=jQuery('.ui-datepicker-group-first .ui-datepicker-title .ui-datepicker-year').text()),f=jQuery.inArray(c,b)),e=d?f+1:f-1,d&&c===b[11]?(a=parseInt(a,10)+1,e=0):!d&&c===b[0]&&(a=parseInt(a,10)-1,e=b.length-1),h=d?'Next Month, '+b[e]+' '+a:'Previous Month, '+b[e]+' '+a,jQuery(g).find('.ui-icon').html(h)}