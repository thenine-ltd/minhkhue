"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}jQuery(document).ready(function(l){var r={init:function(){l("#edit_wc_pos_barcode").on("click",".edit-order-item",this.edit_item).on("click",".delete-order-item",this.delete_item).on("click",".cancel-action",this.cancel_action).on("click",".save-action",this.save_action).on("click","tr.item",this.select_row).on("click","tr.item :input, tr.item a",this.select_row_child).on("click","button.add-line-item",this.add_item).on("click","button.add-line-item-category",this.add_category_items).on("click","button.bulk-add-variations",this.add_item_variations).on("click","button.bulk-delete-items",this.bulk_delete_items).on("click",".meta_removable button",this.remove_attributes),l(document.body).append('<div id="printable_barcode"></div>').on("change",".fields_to_print",this.fields_to_print).on("click","#add_products",this.add_products).on("click",".modal-close",this.modal_close).on("click","#print_barcode",this.print_barcodes).on("change","#label_type",this.label_type_options),l(document.body).find("#label_type").trigger("change")},print_barcodes:function(){if(!l("#edit_wc_pos_barcode #order_line_items tr.item").length)return!1;var e=l("#label_type").val(),r=parseInt(l("#number_of_labels").val()),_=((isNaN(r)||r<1)&&(r=1),l("#printable_barcode").html(""),[]),t=(l("#edit_wc_pos_barcode #order_line_items tr").each(function(e,t){var o=parseInt(l(t).find("td.quantity .quantity").val()),a=r;!isNaN(o)&&1<o&&(a=o);for(var s=0;s<a;s++)_.push(l(t).find(".barcode_border").clone())}),"");switch(e){case"continuous_feed":l("#printable_barcode").addClass("continuous_feed"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("a4").removeClass("letter").removeClass("per_sheet_80").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"continuous_feed_custom":l("#printable_barcode").addClass("continuous_feed_custom"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_80").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");var o=l("#label_margin_unit").val(),a=l("#label_margin_top").val(),s=l("#label_margin_bottom").val(),i=l("#label_margin_left").val(),n=l("#label_margin_right").val(),t="\n                    <style>\n                        #printable_barcode .barcode_border { \n                            padding-top: ".concat(a).concat(o,";\n                            padding-bottom: ").concat(s).concat(o,";\n                            padding-left: ").concat(i).concat(o,";\n                            padding-right: ").concat(n).concat(o,";\n                        }\n                    </style>\n                    ");break;case"a4":l("#printable_barcode").addClass("a4"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("letter").removeClass("per_sheet_80").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"letter":l("#printable_barcode").addClass("letter"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("per_sheet_80").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"per_sheet_30":l("#printable_barcode").addClass("per_sheet_30"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_80").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"per_sheet_80":l("#printable_barcode").addClass("per_sheet_80"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"a4_30":l("#printable_barcode").addClass("a4_30"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_30").removeClass("per_sheet_80").removeClass("a4_27").removeClass("con_25_54");break;case"con_4_3":l("#printable_barcode").addClass("con_4_3"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("per_sheet_80").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"con_4_2":l("#printable_barcode").addClass("con_4_2"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_3").removeClass("per_sheet_80").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"jew_50_10":l("#printable_barcode").addClass("jew_50_10"),l("#printable_barcode").removeClass("con_4_2").removeClass("con_4_3").removeClass("per_sheet_80").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_30").removeClass("a4_30").removeClass("a4_27").removeClass("con_25_54");break;case"a4_27":l("#printable_barcode").addClass("a4_27"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_30").removeClass("per_sheet_80").removeClass("a4_30").removeClass("con_25_54");break;case"con_25_54":l("#printable_barcode").addClass("con_25_54"),l("#printable_barcode").removeClass("jew_50_10").removeClass("con_4_2").removeClass("con_4_3").removeClass("continuous_feed_custom").removeClass("continuous_feed").removeClass("a4").removeClass("letter").removeClass("per_sheet_30").removeClass("per_sheet_80").removeClass("a4_30").removeClass("a4_27")}l("#printable_barcode").append(_);var d=window.open("","","left=0,top=0,width=800,height=800,toolbar=0,scrollbars=0,status=0");d.document.write("<html>"),d.document.write('<head><link rel="stylesheet" href="'.concat(window.wc_pos_barcode.print_css_url,'" /></head>')),d.document.write("<body>"+l("#printable_barcode").prop("outerHTML")+t+"</body>"),d.document.write("</html>"),d.document.close(),d.focus(),setTimeout(function(){d.print(),d.close()},500)},label_type_options:function(e){"continuous_feed_custom"===e.target.value?l("#continous_feed_custom_options").show():l("#continous_feed_custom_options").hide()},fields_to_print:function(){var s=l("#field_barcode").is(":checked"),r=l("#field_sku").is(":checked"),_=l("#field_sku_label").is(":checked"),i=l("#field_name").is(":checked"),n=l("#field_price").is(":checked"),d=l("#field_meta_value").is(":checked"),c=l("#field_meta_title").is(":checked");l("#order_line_items .item").each(function(e,t){var a=l(t).find(".barcode_border .barcode_text"),o=l(t).find(".barcode_border img").data("barcode_url");a.html(""),s?l(t).find(".barcode_border img").show().attr("src",o+"&font_size=0"):l(t).find(".barcode_border img").hide(),r&&(o=l(t).find(".sku_text").text(),a.append(o=_?'<span class="barcode_sku">SKU: '+o+"</span>":o).append("<br />")),i&&(o=l(t).find(".wc-order-item-name").text(),a.append(o='<span class="barcode_name">'+o+"</span>")),n&&(o=l(t).find(".product_price").text(),a.append(o='<span class="barcode_amount">'+o+"</span>")),d&&(o=l(t).find(".display_meta tr"),l.each(o,function(e,t){var o="";c&&(o=l(t).find("th").text()+"&nbsp;"),o+=l(t).find("td").text(),a.append(o='<span class="meta_removable">'+o+" <button></button></span>").append("<br />")}))})},modal_close:function(){return l("#add_item_id").select2("destroy"),l("#wc-pos-barcode-modal-dialog").remove(),!1},init_tiptip:function(){l("#tiptip_holder").removeAttr("style"),l("#tiptip_arrow").removeAttr("style"),l(".tips").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})},block:function(){l("#edit_wc_pos_barcode").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){l("#edit_wc_pos_barcode").unblock()},edit_item:function(){var e=l(this).closest("tr"),t=(e.addClass("editing"),l(this).hide(),e.find("td.quantity .view").hide(),e.find("td.quantity .edit").show(),e.find("td.quantity .quantity").val());return e.find("td.quantity .quantity").data("qty",t),l(".wc-order-bulk-actions .barcode-edit-item").show(),!1},delete_item:function(){var e,t=parseInt(l(this).closest("tr").data("parentid"));return l(this).closest("tr").remove(),l("#tiptip_holder").hide(),l("#edit_wc_pos_barcode #order_line_items tr").length?(e=l('table.woocommerce_order_items tbody#order_line_items tr[data-parentid="'+t+'"]'),l('table.woocommerce_order_items tbody#order_line_items tr[data-prid="'+t+'"]').length||e.removeClass("variation_row")):(t=l("#wc_pos_barcode_no_products").html(),l("#edit_wc_pos_barcode #order_line_items").html(t)),!1},cancel_action:function(){var e=l("#edit_wc_pos_barcode tr.editing");return e.removeClass("editing"),e.find(".edit-order-item").removeAttr("style"),e.find("td.quantity .view").show(),e.find("td.quantity .edit").hide(),l(".wc-order-bulk-actions .barcode-edit-item").hide(),e.each(function(e,t){var o=l(t).find("td.quantity .quantity").data("qty");l(t).find("td.quantity .quantity").val(o),l(t).find("td.quantity .view span").text(o)}),!1},save_action:function(){return l("#edit_wc_pos_barcode tr.editing").each(function(e,t){var o=l(t).find("td.quantity .quantity").val();l(t).find("td.quantity .quantity").data("qty",o)}),r.cancel_action(),!1},select_row:function(){var e,t=!1,t=l(this).is("tr")?l(this):l(this).closest("tr"),o=l(this).closest("table"),t=(t.is(".selected")?t.removeClass("selected"):t.addClass("selected"),o.find("tr.selected"));t.length?(l(".bulk-delete-items").show(),e=!1,t.each(function(){l(this).is("tr.variable")&&(e=!0)}),e?l(".bulk-add-variations").show():l(".bulk-add-variations").hide()):l(".bulk-delete-items, .bulk-add-variations").hide()},select_row_child:function(e){e.stopPropagation()},add_item:function(){var o,e=l("#wc_pos_modal_barcode_add_products").html();return l("body").append(e),l("#order_line_items tr.item").length&&(o=[],l("#order_line_items tr.item").each(function(e,t){t=parseInt(l(t).data("prid"));o.push(t)}),l("#add_item_id").data("exclude",o.join(","))),l(document.body).trigger("wc-enhanced-select-init"),!1},add_category_items:function(){var e=l("#wc_pos_modal_barcode_add_products").html();return l("body").append(e),l("#add_item_id").data("action","wc_pos_json_search_categories").attr("data-placeholder",wc_pos_barcode.select_placeholder_category).addClass("search_categories"),l(document.body).trigger("wc-enhanced-select-init"),!1},bulk_delete_items:function(){var e=l("table.woocommerce_order_items").find("tr.selected");return e.length&&window.confirm(wc_pos_barcode.remove_item_notice)&&(e.find("a.delete-order-item").click(),l(".bulk-delete-items, .bulk-add-variations").hide()),!1},add_products:function(){var e,t=l("#add_item_id").val();l("#add_item_id").hasClass("search_categories")?(r.block(),r.modal_close(),e={action:"wc_pos_get_products_by_categories",categories:t,security:wc_pos_barcode.product_for_barcode_nonce},l.post(wc_pos_barcode.ajax_url,e,function(e){e="object"!==_typeof(e)?jQuery.parseJSON(e):e;r.add_items(e)})):r.add_items(t)},add_items:function(e){var s;void 0!==e&&e&&(s=e.length,r.block(),r.modal_close(),l.each(e,function(e,a){var t;l("table.woocommerce_order_items tbody#order_line_items .item_"+a).length?--s||(r.fields_to_print(),r.init_tiptip(),r.unblock()):(t={action:"wc_pos_add_product_for_barcode",item_to_add:a,security:wc_pos_barcode.product_for_barcode_nonce},l.post(wc_pos_barcode.ajax_url,t,function(e){l("table.woocommerce_order_items tbody#order_line_items .no_products").remove();var t=l(e),t=parseInt(t.data("parentid")),o=l('table.woocommerce_order_items tbody#order_line_items tr[data-parentid="'+t+'"]');NaN!=t&&null!=t&&o.length?(a==t?o.first().before(e):o.last().after(e),(o=l('table.woocommerce_order_items tbody#order_line_items tr[data-parentid="'+t+'"]')).removeClass("variation_row"),l('table.woocommerce_order_items tbody#order_line_items tr[data-prid="'+t+'"]').length&&o.filter(".variation").addClass("variation_row")):l("table.woocommerce_order_items tbody#order_line_items").append(e),--s||(r.fields_to_print(),r.init_tiptip(),r.unblock())}))}))},add_item_variations:function(){var e=l("table.woocommerce_order_items").find("tr.variable.selected"),o=[];e.length&&(r.block(),e.each(function(e,t){t=parseInt(l(t).data("prid"));o.push(t)}),e={action:"wc_pos_get_product_variations_for_barcode",prid:o,security:wc_pos_barcode.product_for_barcode_nonce},l.post(wc_pos_barcode.ajax_url,e,function(e){e="object"!==_typeof(e)?jQuery.parseJSON(e):e;r.add_items(e)}))},remove_attributes:function(){var e=l(this).parent("span");e.next("br").remove(),e.remove()}};r.init()});